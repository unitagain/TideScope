<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>SVG Symbol Test</title>
</head>
<body style="background: #1a1f2e; padding: 40px;">
  <h1 style="color: white;">ECharts Image Symbol Test</h1>
  
  <div id="main" style="width: 800px; height: 600px;"></div>
  
  <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
  <script>
    // Generate 3D planet SVG (same as StarMapPage)
    function generate3DPlanetSVG(text, bgColor, hasRing) {
      const gradientId = `grad-${bgColor.replace('#', '')}`;
      const lighterShade = adjustColorBrightness(bgColor, 60);
      const darkerShade = adjustColorBrightness(bgColor, -30);
      
      const svgContent = `<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100">
        <defs>
          <radialGradient id="${gradientId}">
            <stop offset="0%" stop-color="${lighterShade}" stop-opacity="1" />
            <stop offset="50%" stop-color="${bgColor}" stop-opacity="1" />
            <stop offset="100%" stop-color="${darkerShade}" stop-opacity="1" />
          </radialGradient>
          <radialGradient id="${gradientId}-hl">
            <stop offset="0%" stop-color="white" stop-opacity="0.8" />
            <stop offset="50%" stop-color="white" stop-opacity="0.2" />
            <stop offset="100%" stop-color="white" stop-opacity="0" />
          </radialGradient>
        </defs>
        ${hasRing ? `<ellipse cx="50" cy="50" rx="60" ry="18" fill="none" stroke="#B8860B" stroke-width="3" opacity="0.4" transform="rotate(-15 50 50)"/>` : ''}
        <circle cx="50" cy="50" r="35" fill="url(#${gradientId})"/>
        <ellipse cx="43" cy="43" rx="18" ry="15" fill="url(#${gradientId}-hl)"/>
        ${hasRing ? `<ellipse cx="50" cy="50" rx="60" ry="18" fill="none" stroke="#FFD700" stroke-width="4" opacity="0.7" transform="rotate(-15 50 50)" clip-path="inset(50% 0 0 0)"/>` : ''}
        <text x="50" y="62" font-size="32" font-weight="bold" text-anchor="middle" fill="white" font-family="Arial,sans-serif">${text}</text>
      </svg>`;
      
      const base64 = btoa(unescape(encodeURIComponent(svgContent)));
      return `image://data:image/svg+xml;base64,${base64}`;
    }
    
    function adjustColorBrightness(color, amount) {
      const hex = color.replace('#', '');
      const r = Math.max(0, Math.min(255, parseInt(hex.substring(0, 2), 16) + amount));
      const g = Math.max(0, Math.min(255, parseInt(hex.substring(2, 4), 16) + amount));
      const b = Math.max(0, Math.min(255, parseInt(hex.substring(4, 6), 16) + amount));
      return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;
    }
    
    const chart = echarts.init(document.getElementById('main'));
    
    const option = {
      backgroundColor: 'transparent',
      polar: {
        center: ['50%', '50%'],
        radius: ['10%', '85%']
      },
      angleAxis: {
        type: 'value',
        startAngle: 90,
        min: 0,
        max: 360,
        axisLabel: { show: false }
      },
      radiusAxis: {
        min: 0,
        max: 5,
        axisLabel: { show: false }
      },
      series: [{
        type: 'scatter',
        coordinateSystem: 'polar',
        data: [
          {
            value: [0, 2.5],
            symbol: generate3DPlanetSVG('AB', '#1890ff', false),
            symbolSize: 50
          },
          {
            value: [90, 3.0],
            symbol: generate3DPlanetSVG('CD', '#52c41a', true),
            symbolSize: 60
          },
          {
            value: [180, 2.0],
            symbol: generate3DPlanetSVG('EF', '#eb2f96', false),
            symbolSize: 40
          }
        ]
      }]
    };
    
    chart.setOption(option);
    console.log('Test symbols:', option.series[0].data.map(d => d.symbol.substring(0, 100)));
  </script>
</body>
</html>
